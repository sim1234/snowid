import io

import sdl2
import sdl2.ext
import sdl2.sdlttf

font_data = b"OTTO\x00\x0b\x00\x80\x00\x03\x000CFF \xd7\xbd\xe3\xcb\x00\x00\x05(\x00\x00\x04)FFTMu#\x8e\xbc\x00\x00\t|\x00\x00\x00\x1cGDEF\x00'\x00D\x00\x00\tT\x00\x00\x00&OS/2\xdd\x85\xeb_\x00\x00\x01 \x00\x00\x00`cmapqxM\xfd\x00\x00\x03\x84\x00\x00\x01\x82head\x0f\xee\x18+\x00\x00\x00\xbc\x00\x00\x006hhea\x06Y\x045\x00\x00\x00\xf4\x00\x00\x00$hmtxK\xdb\x07`\x00\x00\t\x98\x00\x00\x00xmaxp\x00\x1eP\x00\x00\x00\x01\x18\x00\x00\x00\x06name\x01e\xcf\"\x00\x00\x01\x80\x00\x00\x02\x01post\xff\x86\x002\x00\x00\x05\x08\x00\x00\x00 \x00\x01\x00\x00\x00\x01\x00\x00Z\xe9>\xa0_\x0f<\xf5\x00\x0b\x03\xe8\x00\x00\x00\x00\xd6\xc7\xea9\x00\x00\x00\x00\xd6\xc7\xea9\x00\x16\x00\x00\x03*\x02\xd4\x00\x00\x00\x08\x00\x02\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x02\xd4\x00.\x00Z\x03\xe8\x00\x00\x00\x00\x03*\x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1e\x00\x00P\x00\x00\x1e\x00\x00\x00\x04\x02\x8c\x01\xf4\x00\x05\x00\x02\x02\x8a\x02\xbb\x00\x00\x00\x8c\x02\x8a\x02\xbb\x00\x00\x01\xdf\x001\x01\x02\x0c\x00\x05\x0b\x01\x02\x01\x01\x01\x01\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x80\x00\x00\x00PfEd\x00\x80\x007\x00w\x03 \xff8\x00Z\x02\xd4\xff\xd2\x00\x00\x00\x00\x00\x00\x80\x00\x01\xfc\x02\x93\x00 \x00 \x00\x01\x00\x00\x00\x0e\x00\xae\x00\x01\x00\x00\x00\x00\x00\x00\x00\x1a\x006\x00\x01\x00\x00\x00\x00\x00\x01\x00\x0c\x00k\x00\x01\x00\x00\x00\x00\x00\x02\x00\x06\x00\x86\x00\x01\x00\x00\x00\x00\x00\x03\x00\x17\x00\xbd\x00\x01\x00\x00\x00\x00\x00\x04\x00\x0c\x00\xef\x00\x01\x00\x00\x00\x00\x00\x05\x00\x0f\x01\x1c\x00\x01\x00\x00\x00\x00\x00\x06\x00\x0c\x01F\x00\x03\x00\x01\x04\t\x00\x00\x004\x00\x00\x00\x03\x00\x01\x04\t\x00\x01\x00\x18\x00Q\x00\x03\x00\x01\x04\t\x00\x02\x00\x0c\x00x\x00\x03\x00\x01\x04\t\x00\x03\x00.\x00\x8d\x00\x03\x00\x01\x04\t\x00\x04\x00\x18\x00\xd5\x00\x03\x00\x01\x04\t\x00\x05\x00\x1e\x00\xfc\x00\x03\x00\x01\x04\t\x00\x06\x00\x18\x01,\x00C\x00r\x00e\x00a\x00t\x00e\x00d\x00 \x00b\x00y\x00 \x00T\x00e\x00a\x00m\x00V\x00i\x00e\x00w\x00e\x00r\x00 \x00G\x00m\x00b\x00H\x00\x00Created by TeamViewer GmbH\x00\x00T\x00e\x00a\x00m\x00V\x00i\x00e\x00w\x00e\x00r\x001\x003\x00\x00TeamViewer13\x00\x00M\x00e\x00d\x00i\x00u\x00m\x00\x00Medium\x00\x00T\x00e\x00a\x00m\x00V\x00i\x00e\x00w\x00e\x00r\x001\x003\x00 \x00:\x00 \x006\x00-\x009\x00-\x002\x000\x001\x007\x00\x00TeamViewer13 : 6-9-2017\x00\x00T\x00e\x00a\x00m\x00V\x00i\x00e\x00w\x00e\x00r\x001\x003\x00\x00TeamViewer13\x00\x00V\x00e\x00r\x00s\x00i\x00o\x00n\x00 \x000\x001\x003\x00.\x001\x001\x00 \x00\x00Version 013.11 \x00\x00T\x00e\x00a\x00m\x00V\x00i\x00e\x00w\x00e\x00r\x001\x003\x00\x00TeamViewer13\x00\x00\x00\x00\x00\x00\x00\x03\x00\x00\x00\x03\x00\x00\x00\x1c\x00\x01\x00\x00\x00\x00\x00|\x00\x03\x00\x01\x00\x00\x00\x1c\x00\x04\x00`\x00\x00\x00\x14\x00\x10\x00\x03\x00\x04\x008\x00T\x00V\x00a\x00e\x00i\x00m\x00r\x00w\xff\xff\x00\x00\x007\x00A\x00V\x00a\x00e\x00i\x00m\x00r\x00w\xff\xff\xff\xca\xff\xc2\xff\xc1\xff\xb7\xff\xb4\xff\xb1\xff\xae\xff\xaa\xff\xa6\x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x06\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x02\x00\x00\x00\x00\x00\x00\x00\x00\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x00\x17\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x18\x00\x00\x00\x19\x00\x00\x00\x1a\x00\x00\x00\x1b\x00\x00\x00\x00\x1c\x00\x00\x00\x00\x1d\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x00\x00\x00\x00\x00\x00\xff\x83\x002\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x04\x04\x00\x01\x01\x01\rTeamViewer13\x00\x01\x02\x00\x01\x00*\xf8\x1b\x00\xf8\x1c\x01\xf8\x1d\x02\xf8\x1e\x03\xf8\x17\x04\xa1\x8b\xf9\xbe\xf9h\x05\x1c\x00\x8c\x0f\x1c\x00\x00\x10\x1c\x00\xc7\x11\x1c\x009\x1c\x03\xe1\x12\x00\x04\x02\x00\x01\x00\x07\x00!\x00-\x009013.11Created by TeamViewer GmbHTeamViewer13TeamViewer13\x00\x00\x00\x00\x18\x00\x19\x00\"\x00#\x00$\x00%\x00&\x00'\x00(\x00)\x00*\x00+\x00,\x00-\x00.\x00/\x000\x001\x002\x003\x004\x005\x007\x00B\x00F\x00J\x00N\x00S\x00X\x00\x1e\x02\x00\x01\x00$\x00\\\x00q\x00\x81\x00\x91\x00\xa0\x00\xaf\x00\xbe\x00\xcd\x00\xdd\x00\xec\x00\xfb\x01\n\x01\x19\x01(\x017\x01F\x01V\x01f\x01v\x01\x86\x01\x96\x01\xc6\x01\xe6\x02\x06\x02)\x02H\x02\x83\x02\xb1\x02\xda\xf7\xc7\x8b\xbd\xf8D\xbd\x01\xbd\xbd\xf7\xc0\xbd\x03\xbd\x16\xf8$\xf8\xa8\xfc$\x06\xbd\xfcv\x15\xf8D\xf7\xc0\xfcD\x07\x0e\xf8\r\xf8\x10\xd1U\xd3\xf7T\xcb\x12\xf72\xbb\x13\xb0\xc7\xf9h\x15\x85K\xf7\xaa\x8b5\xfbbE\x87qE\xd1\x93M\xfb\xc4\xbb\x89\xe1\xf7\xca\x05\x13p\xf3\x8f\x8b\xd3?\x83\xeb\xf7\x96\x05\x0e\xdev\x01\xf8\x08\xf9\x14\x15\xf7\x14\xfc\xd6\xf7\xa6\xf7\x16\xaf\xf8Z\x05\x0e.\xf8\xce\xf7\x08\x01\xa9\xad\x03\xa7\xf9B\x15 \n\x0e\xf6\xf8\xce\xf7\x08\x01\xa9\xad\x03\xa7\xf9B\x15 \n\x0e\xf8\xce\xf7\x08\x01\xa9\xad\x03\xa7\xf9B\x15 \n\x0e\xf8\xce\xf7\x08\x01\xa9\xad\x03\xa7\xf9B\x15 \n\x0e\xf8\xce\xf7\x08\x01\xa9\xad\x03\xa7\xf9B\x15 \n\x0e\xf8\xce\xf7\x08\x01\xa9\xad\x03\xa7\xf9B\x15 \n\x0e.\xf8\xce\xf7\x08\x01\xa9\xad\x03\xa7\xf9B\x15 \n\x0e\xf8\xce\xf7\x08\x01\xa9\xad\x03\xa7\xf9B\x15 \n\x0e\xf8\xce\xf7\x08\x01\xa9\xad\x03\xa7\xf9B\x15 \n\x0e\xf8\xce\xf7\x08\x01\xa9\xad\x03\xa7\xf9B\x15 \n\x0e\xf8\xce\xf7\x08\x01\xa9\xad\x03\xa7\xf9B\x15 \n\x0e\xf8\xce\xf7\x08\x01\xa9\xad\x03\xa7\xf9B\x15 \n\x0e\xf8\xce\xf7\x08\x01\xa9\xad\x03\xa7\xf9B\x15 \n\x0e\xf8\xce\xf7\x08\x01\xa9\xad\x03\xa7\xf9B\x15 \n\x0eS\xf8\xce\xf7\x08\x01\xa9\xad\x03\xa7\xf9B\x15 \n\x0e\x89\xf8\xce\xf7\x08\x01\xa9\xad\x03\xa7\xf9B\x15 \n\x0eB\xf8\xce\xf7\x08\x01\xa9\xad\x03\xa7\xf9B\x15 \n\x0eG\xf8\xce\xf7\x08\x01\xa9\xad\x03\xa7\xf9B\x15 \n\x0ec\xf8\xce\xf7\x08\x01\xa9\xad\x03\xa7\xf9B\x15 \n\x0e\xf7\xfa\xf8\xcd\xf1'\xe5\x12\xf7\x0c\xf7X\xfbP\xf7N\x13\xa0\xa1\xf93\x15\x97%\xe1\x87\x05\x13P\x93\xfc\x9b\xf7N\x8b\x05\x13`\x8d\xf8\x92\xf7<\x9a\x83\xe5\x05\x0e\xf8\xa3\xcev\x01\xf7@\xf8\xfc\x15\xf7>\xfc\xc6\xf3\x83\xf7l\xf8\xa8\xfb\x0c\x97\xfb \xfc\"3\xf8B\x05\x0e\xf8\x1a\xf8@\xf5\x03\xb9\xf8\x88\x15\xa9\xfb\xf4\xc7=\xf7b\x8f\xdd\xe1\x8f1\xf5\x85a\xf8\xac\xfc\x1a\x82\x05\x0e\xf8\x8c\xf8\x07\xf7Z\x01\xf7\xdc\xf8\x07\x15\xf7\x9c\x8b\x9b\xf7Z\xfc\xd8\x84\x9f\xfc\x8c\xf8\xf0\x8b\x89\xf7\x02\xfb\xc8p\x05\x0e\xf7P\xbd\xf7\x84\x12\xe1\xed1\xdf\x13\xa0\xe9\xf7\xb6\x15\x13\xc0\x83\xfb\x86\xed\x8d\x05\x13\xa0\x85\xf7x\x05\x0e\xf9\x00\xf7.\xd3O\xe7\xf8\x1a\xd3\x13\xa0\xf7.\xf8\x90\x15\x13`\x97\xfc4\xe7\x7f\x9b\xf7>\xe1\x8f\x95\xfb`\xf7>\x8fu\xf7T\xf7\x12\x8f\x8f\xfb\\\xd3\x91\xa9\xf7\xb4\x05\x13\xa0\xfc\xa0\xc5\x8f\xf5\x05\x0e\xf8X\xf7\x12\xf7\xd6\x12\xf7~\xef)\xf7\x18\x13\xc0\xf7~\xf8N\x15\x13\xa0\x8d\xfb\xc8\xf7\x18\x83}\xf7@\xf7\x0c\xf7\x083\x99OA\x05\x13\xc0\x93\xe9\x05\x0e\xf8\xb0\xdb\xf7\x9a\x01\xf7\x1e\xf7\xd6\x15\xf7 \xfb\x86\xd9\xf70\xd9\xfb$\xf7\x0c\xf7\x88'\x91o\xfb&I\xf7\x103\xfb _\xf7&\x05\x0e\xfa|\x14\xf7U\x15\xb9\xf8\xa0\xf0\x9a\x06\x1e\n\x00\x18\x891\xff\x0c\t\x8b\x0c\n\xf7\x08\n\xcb\x91\x8d\x9d\x97\x99\xdd\xb5\xa1\xc7\x0c\x0c\xad\x0b\xad\x99\xa3\x97\x93\x91\x8d\x91\xa5\xc1\x0c\r\x1c\x009\x13\x00\x01\x01\x01\x0b\x8d\xfb\x06\xad\x89\x91\xf7\x04\x05\x0b\x00\x00\x00\x00\x01\x00\x00\x00\x0c\x00\x00\x00\x16\x00\x1e\x00\x02\x00\x01\x00\x01\x00\x1d\x00\x01\x00\x04\x00\x00\x00\x02\x00\x00\x00\x01\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x00\x00\xd2\x04\x14\x05\x00\x00\x00\x00\xccW\x90\x93\x00\x00\x00\x00\xd6\xc7\xea#\x01\xf4\x002\x02:\x006\x03\xe8\x01t\x00d\x00\x1c\x01,\x00\x1c\x03\xe8\x00\x1c\x03\xe8\x00\x1c\x03\xe8\x00\x1c\x03\xe8\x00\x1c\x00d\x00\x1c\x03\xe8\x00\x1c\x03\xe8\x00\x1c\x03\xe8\x00\x1c\x03\xe8\x00\x1c\x03\xe8\x00\x1c\x03\xe8\x00\x1c\x03\xe8\x00\x1c\x00\x89\x00\x1c\x00\xbf\x00\x1c\x00x\x00\x1c\x00}\x00\x1c\x00\x99\x00\x1c\x02'\x00\x16\x02\xd0\x00\xac\x02G\x00.\x02\xb9\x00\x1c\x01}\x00V\x03-\x00\x9a\x02\x85\x00\xea\x02\xdd\x00\x8a"


def get_font(size: int) -> sdl2.sdlttf.TTF_Font:
    if sdl2.sdlttf.TTF_WasInit() == 0 and sdl2.sdlttf.TTF_Init() != 0:
        raise sdl2.ext.SDLError()
    return sdl2.sdlttf.TTF_OpenFontRW(
        sdl2.rw_from_object(io.BytesIO(font_data)), 1, size
    )


def render_font(
    font: sdl2.sdlttf.TTF_Font,
    text: str,
    color: sdl2.SDL_Color = None,
    bg_color: sdl2.SDL_Color = None,
):
    text_b = bytes(text, "utf-8")
    if color is None:
        color = sdl2.SDL_Color(255, 255, 255)
    if bg_color is None:
        bg_color = sdl2.SDL_Color(0, 0, 0)

    if bg_color == sdl2.SDL_Color(0, 0, 0):
        sf = sdl2.sdlttf.TTF_RenderUTF8_Blended(font, text_b, color)
    else:
        sf = sdl2.sdlttf.TTF_RenderUTF8_Shaded(font, text_b, color, bg_color)
    if not sf:
        raise sdl2.ext.SDLError(sdl2.sdlttf.TTF_GetError())
    return sf.contents
